(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef9b5f18"],{"4bd4":function(e,t,a){"use strict";a("4de4"),a("7db0"),a("4160"),a("caad"),a("07ac"),a("2532"),a("159b");var i=a("5530"),r=a("58df"),n=a("7e2b"),s=a("3206");t["a"]=Object(r["a"])(n["a"],Object(s["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(e){var t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(e){var t=this,a=function(e){return e.$watch("hasError",(function(a){t.$set(t.errorBag,e._uid,a)}),{immediate:!0})},i={_uid:e._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?i.shouldValidate=e.$watch("shouldValidate",(function(r){r&&(t.errorBag.hasOwnProperty(e._uid)||(i.valid=a(e)))})):i.valid=a(e),i},validate:function(){return 0===this.inputs.filter((function(e){return!e.validate(!0)})).length},reset:function(){this.inputs.forEach((function(e){return e.reset()})),this.resetErrorBag()},resetErrorBag:function(){var e=this;this.lazyValidation&&setTimeout((function(){e.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(e){return e.resetValidation()})),this.resetErrorBag()},register:function(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister:function(e){var t=this.inputs.find((function(t){return t._uid===e._uid}));if(t){var a=this.watchers.find((function(e){return e._uid===t._uid}));a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter((function(e){return e._uid!==t._uid})),this.inputs=this.inputs.filter((function(e){return e._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(e){var t=this;return e("form",{staticClass:"v-form",attrs:Object(i["a"])({novalidate:!0},this.attrs$),on:{submit:function(e){return t.$emit("submit",e)}}},this.$slots.default)}})},"803d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-data-table",{staticClass:"elevation-1",attrs:{locale:"fr-FR",headers:e.headers,items:e.users,"item-key":"id","sort-by":"username",search:e.search,expanded:e.expanded,"show-expand":""},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("Utilisateurs")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-form",{ref:"userEdit"},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{autofocus:"",label:"Nom d'utilisateur"},model:{value:e.editedItem.username,callback:function(t){e.$set(e.editedItem,"username",t)},expression:"editedItem.username"}})],1),a("v-col",{attrs:{cols:"12"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Annuler ")]),a("v-btn",{attrs:{color:"green",text:"",type:"submit"},on:{click:e.save}},[e._v(" Valider ")])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Are you sure you want to delete this item?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.deleteItemConfirm(e.editedItem)}}},[e._v("OK")]),a("v-spacer")],1)],1)],1)],1),a("v-text-field",{staticClass:"mx-4",attrs:{"append-icon":"mdi-magnify",label:"Rechercher","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0},{key:"item.actions",fn:function(t){var i=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(i)}}},[e._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(i)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v(" Rafraichir ")])]},proxy:!0},{key:"expanded-item",fn:function(t){var i=t.headers,r=t.item;return[a("td",{attrs:{colspan:i.length}},[a("ul",[a("li",[r.createdAt&&r.createdBy?a("span",[e._v(" Créé par "+e._s(r.createdBy)+" le "+e._s(new Date(r.createdAt).toLocaleString())+" ")]):a("span",[e._v(" Créé le "+e._s(new Date(r.createdAt).toLocaleString()))])]),a("li",[r.updatedAt&&r.updatedBy?a("span",[e._v(" Dernière modification par "+e._s(r.updatedBy)+" le "+e._s(new Date(r.updatedAt).toLocaleString())+" ")]):a("span",[e._v("Aucune modification depuis la création.")])])])])]}}],null,!0)}),a("v-snackbar",{attrs:{color:this.alertColor},scopedSlots:e._u([{key:"action",fn:function(t){var i=t.attrs;return[a("v-btn",e._b({attrs:{color:e.closeColor,icon:""},on:{click:function(t){e.alert=!1}}},"v-btn",i,!1),[a("v-icon",[e._v("mdi-close")])],1)]}}]),model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[e._v(" "+e._s(this.alertMsg)+" ")])],1)},r=[],n=(a("c975"),a("a434"),a("d3b7"),a("ddb0"),{data:function(){return{alert:!1,alertMsg:"",alertColor:"black",closeColor:"red",search:"",dialog:!1,dialogDelete:!1,expanded:[],headers:[{text:"Nom d'utilisateur",align:"start",value:"username"},{text:"Admin",align:"",value:"is_admin"},{text:"Actions",value:"actions",sortable:!1}],users:[],editedIndex:-1,editedItem:{id:"",username:"",createdBy:"",createdAt:"",updatedBy:"",updatedAt:""},defaultItem:{id:"",username:"",createdBy:"",createdAt:"",updatedBy:"",updatedAt:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"Ajoute un utilisateur":"Modifie l'utilisateur"}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},created:function(){this.initialize()},methods:{initialize:function(){var e=this;this.$http("/user").then((function(t){e.users=t.data})).catch((function(t){e.alertColor="red",e.closeColor="black",e.alert=!0,e.alertMsg=t.message,console.error(t)}))},editItem:function(e){this.editedIndex=this.users.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.editedIndex=this.users.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(e){var t=this,a=this.editedIndex;this.$http.delete("/user/".concat(e.id)).then((function(e){t.alertColor="green",t.closeColor="black",t.alert=!0,t.alertMsg=e.data.message,t.users.splice(a,1),console.log(e)})).catch((function(e){t.alertColor="red",t.closeColor="black",t.alert=!0,t.alertMsg=e.message,console.error(e)})),this.closeDelete()},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){var e=JSON.parse(localStorage.getItem("user")).username,t=this,a=this.editedIndex;this.editedIndex>-1?(this.editedItem.updatedBy=e,this.$http.put("/user/".concat(this.editedItem.id),this.editedItem).then((function(e){t.alertColor="green",t.closeColor="black",t.alert=!0,t.alertMsg=e.data.message,Object.assign(t.users[a],e.data.values)})).catch((function(e){return console.error(e)}))):this.$http.post("/user/create",{name:this.editedItem.username,createdBy:e}).then((function(e){t.alertColor="green",t.closeColor="black",t.alert=!0,t.alertMsg=e.data.message,t.users.push(e.data.values)})).catch((function(e){console.error(e),t.alertColor="red",t.closeColor="black",t.alert=!0,t.alertMsg=e.message})),this.close()}}}),s=n,o=a("2877"),l=a("6544"),d=a.n(l),c=a("8336"),u=a("b0af"),h=a("99d9"),f=a("62ad"),v=a("a523"),m=a("8fea"),p=a("169a"),b=a("ce7e"),g=a("4bd4"),x=a("132d"),_=a("0fd9"),k=a("2db4"),I=a("2fa4"),C=a("8654"),y=a("71d9"),V=a("2a7f"),w=Object(o["a"])(s,i,r,!1,null,null,null);t["default"]=w.exports;d()(w,{VBtn:c["a"],VCard:u["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCol:f["a"],VContainer:v["a"],VDataTable:m["a"],VDialog:p["a"],VDivider:b["a"],VForm:g["a"],VIcon:x["a"],VRow:_["a"],VSnackbar:k["a"],VSpacer:I["a"],VTextField:C["a"],VToolbar:y["a"],VToolbarTitle:V["b"]})}}]);
//# sourceMappingURL=chunk-ef9b5f18.7d00a5f3.js.map