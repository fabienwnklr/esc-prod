(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21ed53"],{d6f1:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-data-table",{staticClass:"elevation-1",attrs:{locale:"fr-FR",headers:e.headers,items:e.platforms,"item-key":"name","sort-by":"name",search:e.search,expanded:e.expanded,"show-expand":""},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("Plateformes")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,l=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",l,!1),o),[e._v(" Ajouter ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{autofocus:"",label:"Nom du jeu"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-col",{attrs:{cols:"12"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Annuler ")]),a("v-btn",{attrs:{color:"green",text:""},on:{click:e.save}},[e._v(" Valider ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Are you sure you want to delete this item?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.deleteItemConfirm(e.editedItem)}}},[e._v("OK")]),a("v-spacer")],1)],1)],1)],1),a("v-text-field",{staticClass:"mx-4",attrs:{"append-icon":"mdi-magnify",label:"Rechercher","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0},{key:"item.actions",fn:function(t){var o=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(o)}}},[e._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(o)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v(" Rafraichir ")])]},proxy:!0},{key:"expanded-item",fn:function(t){var o=t.headers,l=t.item;return[a("td",{attrs:{colspan:o.length}},[a("ul",[a("li",[e._v(" Créer par "+e._s(l.createdBy)+" le "+e._s(new Date(l.createdAt).toLocaleString())+" ")]),a("li",[l.updatedAt&&l.updatedBy?a("span",[e._v(" Dernière modification par "+e._s(l.updatedBy)+" le "+e._s(new Date(l.updatedAt).toLocaleString())+" ")]):a("span",[e._v("Aucune modification depuis la création.")])])])])]}}],null,!0)}),a("v-snackbar",{attrs:{color:this.alertColor},scopedSlots:e._u([{key:"action",fn:function(t){var o=t.attrs;return[a("v-btn",e._b({attrs:{color:e.closeColor,icon:""},on:{click:function(t){e.alert=!1}}},"v-btn",o,!1),[a("v-icon",[e._v("mdi-close")])],1)]}}]),model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[e._v(" "+e._s(this.alertMsg)+" ")])],1)},l=[],r=(a("c975"),a("a434"),a("b0c0"),a("d3b7"),a("ddb0"),{data:function(){return{alert:!1,alertMsg:"",alertColor:"black",closeColor:"red",search:"",dialog:!1,dialogDelete:!1,expanded:[],headers:[{text:"Nom",align:"start",value:"name"},{text:"Actions",value:"actions",sortable:!1}],platforms:[],editedIndex:-1,editedItem:{id:"",name:"",createdBy:"",createdAt:"",updatedBy:"",updatedAt:""},defaultItem:{id:"",name:"",createdBy:"",createdAt:"",updatedBy:"",updatedAt:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"Ajoute une plateforme":"Modifie la plateforme"}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},created:function(){this.initialize()},methods:{initialize:function(){var e=this;this.$http("/platform").then((function(t){e.platforms=t.data})).catch((function(t){e.alertColor="red",e.closeColor="black",e.alert=!0,e.alertMsg=t.message,console.error(t.errorThrow)}))},editItem:function(e){this.editedIndex=this.platforms.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.editedIndex=this.platforms.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(e){var t=this,a=this.editedIndex;this.$http.delete("/platform/".concat(e.id)).then((function(e){t.alertColor="green",t.closeColor="black",t.alert=!0,t.alertMsg=e.data.message,t.platforms.splice(a,1),console.log(e)})).catch((function(e){t.alertColor="red",t.closeColor="black",t.alert=!0,t.alertMsg=e.message,console.error(e)})),this.closeDelete()},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){var e=JSON.parse(localStorage.getItem("user")).username,t=this,a=this.editedIndex;this.editedIndex>-1?(this.editedItem.updatedBy=e,this.$http.put("/platform/".concat(this.editedItem.id),this.editedItem).then((function(e){t.alertColor="green",t.closeColor="black",t.alert=!0,t.alertMsg=e.data.message,Object.assign(t.platforms[a],e.data.values)})).catch((function(e){return console.error(e)}))):this.$http.post("/platform/create",{name:this.editedItem.name,createdBy:e}).then((function(e){t.alertColor="green",t.closeColor="black",t.alert=!0,t.alertMsg=e.data.message,t.platforms.push(e.data.values)})).catch((function(e){console.error(e),t.alertColor="red",t.closeColor="black",t.alert=!0,t.alertMsg=e.message})),this.close()}}}),i=r,n=a("2877"),s=a("6544"),c=a.n(s),d=a("8336"),u=a("b0af"),m=a("99d9"),f=a("62ad"),v=a("a523"),p=a("8fea"),h=a("169a"),b=a("ce7e"),g=a("132d"),x=a("0fd9"),k=a("2db4"),C=a("2fa4"),I=a("8654"),_=a("71d9"),y=a("2a7f"),V=Object(n["a"])(i,o,l,!1,null,null,null);t["default"]=V.exports;c()(V,{VBtn:d["a"],VCard:u["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:m["c"],VCol:f["a"],VContainer:v["a"],VDataTable:p["a"],VDialog:h["a"],VDivider:b["a"],VIcon:g["a"],VRow:x["a"],VSnackbar:k["a"],VSpacer:C["a"],VTextField:I["a"],VToolbar:_["a"],VToolbarTitle:y["b"]})}}]);
//# sourceMappingURL=chunk-2d21ed53.7038350a.js.map